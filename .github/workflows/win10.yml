name: CÃ i Ä‘áº·t Windows 2022 180 ngÃ y (cÃ³ thá»ƒ thay Ä‘á»•i kÃ©o dÃ i thÃªm sau)
run-name: ChÃ o má»«ng ${{ github.actor }} ğŸš€

on:

  workflow_dispatch:
   inputs:
      
      
      os5:
        description: 'Nháº­p sá»‘ GB dung lÆ°á»£ng cáº§n thiáº¿t cho á»• Ä‘Ä©a Windows. VÃ­ dá»¥: 500G'
        required: true
      os6:
        description: 'Sá»‘ M ram cáº§n thiáº¿t. VÃ­ dá»¥: 2048M'
        required: true
      
    

jobs:

  Dang_Chay:

    timeout-minutes: 9999999999999999999999999999999999999999999999

    runs-on: self-hosted 

    

    steps:

    - name: Äang cháº¡y...

      run: |

            sleep 1
            echo Äang cÃ i Ä‘áº·t
            sudo apt update &>/dev/null
            sudo apt install qemu-utils qemu-system-x86 -y &>/dev/null
            echo Äang táº£i file Windows...
            wget -O windows.iso https://software-download.microsoft.com/download/sg/20348.169.210806-2348.fe_release_svc_refresh_SERVER_EVAL_x64FRE_en-us.iso &>/dev/null
            echo Äang táº¡o file Ä‘Ä©a theo Ã½ cá»§a báº¡n
            qemu-img create -f raw windows.img ${{ github.event.inputs.os5 }}
            
            echo ÄÃ£ cháº¡y thÃ nh cÃ´ng!!!!!!!
            echo Äá»ƒ káº¿t ná»‘i hÃ£y má»Ÿ VNC lÃªn vÃ  vÃ o localhost:0
            echo Äá»ƒ káº¿t ná»‘i vá»›i Remote Desktop hÃ£y vÃ o mÃ¡y Windows vá»«a táº¡o vÃ  báº­t Remote Desktop lÃªn, quay láº¡i Linux gá»‘c vÃ  káº¿t ná»‘i vÃ o localhost:3381
            qemu-system-x86_64 -net nic -net user,hostfwd=tcp::3381-:3389 -m ${{ github.event.inputs.os5 }} -device usb-tablet -device usb-ehci,id=usb,bus=pci.0,addr=0x4 -cpu max,+nx -smp 2 -usbdevice tablet -k en-us -cdrom windows.iso -hda windows.img -vnc :0 -boot d
      timeout-minutes: 99999999999999999999999999999999999999999
